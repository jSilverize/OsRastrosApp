"use strict";angular.module("rastros",["ngRoute","ngAnimate","duScroll"]),angular.module("rastros").config(["$locationProvider","$routeProvider","momentProvider",function(t,e,a){a.locale("pt-br"),e.when("/",{templateUrl:"app/templates/home-template.html",controller:"HomeController"}).when("/404",{templateUrl:"app/templates/404-template.html",controller:"404Controller"}).when("/login",{templateUrl:"app/templates/auth-template.html",controller:"AuthController",authPage:!0}).when("/perfil",{templateUrl:"app/templates/profile-template.html",controller:"ProfileController",authenticated:!0}).otherwise({redirectTo:"/404"})}]),angular.module("rastros").run(["$rootScope","routeChange",function(t,e){t.$on("$routeChangeError",e.error),t.$on("$routeChangeStart",e.start),t.$on("$routeChangeSuccess",e.success)}]),function(){angular.module("rastros").run(["$templateCache",function(t){t.put("app/templates/404-template.html",'<header class="header"> <container> <h1 class="header__title"> Vish... </h1> </container> </header> <section class="section"> <container> <h2 class="section__title"> Caminho ou página não encontrada </h2> <button class="btn btn--outlined" data-ng-click="goBack()"> Voltar </button> </container> </section>'),t.put("app/templates/auth-template.html",'<header class="header"> <container> <h1 class="header__title"> Acesso </h1> </container> </header> <section class="section"> <container> <div class="row"> <div class="col-lg-4 col-md-3"></div> <div class="col-lg-4 col-md-6 col-sm-12"> <form class="form form--vertical" data-ng-submit="login()"> <div class="form__field"> <button class="form__button btn btn--wide btn--blue-facebook" type="button" data-ng-click="facebook()"> ENTRAR COM O SEU <i class="fa fa-fw fa-lg fa-facebook-official"></i> </button> </div> <div class="form__field text-center"> <div class="divider divider--horizontal"> OU ENTÃO </div> </div> <div class="form__field"> <label class="form__label" for="email"> E-mail: </label> <input class="form__control" type="email" name="email" id="email" required placeholder="voce@exemplo.com" data-ng-model="form.email"> </div> <div class="form__field"> <label class="form__label" for="password"> Senha: </label> <input class="form__control" type="password" id="password" required placeholder="**************" data-ng-model="form.password"> </div> <div class="form__field"> <button class="form__button btn btn--wide btn--green" type="submit" data-ng-disabled="!form.email || !form.password"> <i class="fa fa-fw fa-sign-in"></i> LOGIN </button> </div> </form> </div> </div> </container> </section>'),t.put("app/templates/home-template.html",'<header class="header"> <container> <h1 class="header__title"> Futebol </h1> </container> </header> <section class="section" data-ng-if="nextMatches"> <container> <h1 class="section__title"> Próximas Partidas </h1> <div class="card match" data-ng-repeat="match in nextMatches"> <div class="row"> <div class="col-lg-8 col-sm-7"> <div class="match__teams"> <figure class="match__team"> <img class="match__team__logo" data-ng-src="{{ match.opponent.logo }}" alt="{{ match.opponent.title }}"> <legend class="match__team__title"> {{ match.opponent.title }} </legend> </figure> <div class="match__versus">×</div> <figure class="match__team"> <img class="match__team__logo" data-ng-src="./assets/images/os-rastros.gif" alt="Os Rastros"> <legend class="match__team__title"> Os Rastros </legend> </figure> </div> </div> <div class="col-lg-4 col-sm-5"> <div class="match__details"> <div class="match__details__item"> <i class="fa fa-fw fa-list match__details__item__icon"></i> <strong>DETALHES</strong> </div> <div class="match__details__item"> <i class="fa fa-fw fa-calendar match__details__item__icon"></i> {{ match.date.formatted }} </div> <div class="match__details__item"> <i class="fa fa-fw fa-clock-o match__details__item__icon"></i> {{ match.date.time }}, bola rolando </div> <div class="match__details__item"> <i class="fa fa-fw fa-map-marker match__details__item__icon"></i> {{ match.location.stadium }} </div> </div> </div> </div> </div> </container> </section> '),t.put("app/templates/profile-template.html",'<header class="header"> <container> <h1 class="header__title"> Meu Perfil </h1> </container> </header> <section class="section"> <container> <div class="row"> <div class="col-lg-8 col-md-6 col-sm-12"> <h2 class="section__title"> Informações </h2> <form class="form form--vertical"> <div class="form__field" data-ng-if="user.photoURL"> <label class="form__label"> Foto </label> <img class="img img--circle" data-ng-src="{{ user.photoURL }}"> </div> <div class="form__field" data-ng-if="user.displayName"> <label class="form__label"> Nome </label> <div data-ng-bind="user.displayName"></div> </div> <div class="form__field" data-ng-if="user.email"> <label class="form__label"> Endereço de e-mail </label> <div data-ng-bind="user.email"></div> </div> </form> </div> <div class="col-lg-4 col-md-6 col-sm-12"> <h2 class="section__title"> Opções da conta (breve) </h2> <div class="form__field"> <button class="form__button btn btn--wide btn--blue-facebook" type="button" data-ng-click="facebookLink()" disabled> <i class="fa fa-fw fa-lg fa-facebook-official"></i> CONECTAR AO FACEBOOK </button> </div> <div class="form__field"> <button class="form__button btn btn--wide btn--blue" type="button" data-ng-click="twitterLink()" disabled> <i class="fa fa-fw fa-lg fa-twitter"></i> CONECTAR AO TWITTER </button> </div> <div class="form__field"> <button class="form__button btn btn--wide btn--red" type="button" data-ng-click="googleLink()" disabled> <i class="fa fa-fw fa-lg fa-google-plus"></i> CONECTAR AO GOOGLE+ </button> </div> </div> </div> </container> </section>'),t.put("app/templates/directives/loader-directive-template.html",'<div class="loader" data-ng-hide="activities.length === 0 && errors.length === 0"> <div class="loader__content"> <div class="venus container"> <figure class="loader__content__spinner" data-ng-show="activities.length !== 0 && errors.length === 0"> <img class="loader__content__spinner__image" data-ng-src="./assets/images/loader--spinner.gif" alt="Loading"> </figure> <div class="loader__content__message" data-ng-repeat="activity in activities"> <div data-ng-if="!activity.title && !activity.text" data-ng-bind-html="activity | unsafe"> </div> <div class="loader__content__message__title" data-ng-if="activity.title" data-ng-bind-html="activity.title | unsafe"> </div> <div class="loader__content__message__text" data-ng-if="activity.text" data-ng-bind-html="activity.text | unsafe"> </div> </div> <div class="loader__content__error" data-ng-repeat="error in errors"> <div data-ng-bind-html="error | unsafe"></div> <button class="loader__content__error__icon" data-ng-click="clearError(error)"> <i class="fa fa-times"></i> </button> </div> </div> </div> </div> '),t.put("app/templates/directives/navbar-directive-template.html",'<nav class="navbar navbar--fixed-top navbar--inverted"> <container> <div class="navbar-nav"> <button class="navbar-menu-toggle" data-ng-click="toggle()"> <i class="fa fa-fw fa-bars"></i> </button> <a class="navbar-brand" data-ng-click="goTo(\'/\')" title="Início"> <img class="navbar-brand-logo" width="32" height="32" data-ng-src="./assets/images/icons/icon-32x32.png" src="./assets/images/icons/icon-32x32.png"> Os Rastros </a> <ul class="navbar-menu list" data-ng-show="opened"> <!--\n\t\t\t\t<li class="list-item">\n\t\t\t\t\t<a class="list-item-link"\n\t\t\t\t\t   data-ng-click="goTo(\'/help\')">\n\t\t\t\t\t   <i class="fa fa-fw fa-question-circle-o"></i>\n\t\t\t\t\t\tAjuda\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t\t--> <li class="list-item" data-ng-show="user"> <a class="btn btn--black navbar-menu-user" title="Ver seu perfil" data-ng-click="goTo(\'/perfil\')"> {{ user.displayName || user.email }} <img class="navbar-menu-user-avatar" height="32" width="32" data-ng-src="{{ user.photoURL }}" data-ng-if="user.photoURL"> </a> </li> <li class="list-border"></li> <li class="list-item" data-ng-hide="user"> <a class="btn btn--black" data-ng-click="goTo(\'/login\')"> <i class="fa fa-fw fa-sign-in"></i> Entrar </a> </li> <li class="list-item" data-ng-show="user"> <a class="btn btn--light-black" data-ng-click="logout()" title="Sair"> <i class="fa fa-fw fa-power-off"></i> </a> </li> </ul> <!--\n\t\t\t<button class="navbar-menu-settings">\n\t\t\t\t<i class="fa fa-fw fa-ellipsis-v"></i>\n\t\t\t</button>\n\t\t\t--> </div> </container> </nav> '),t.put("app/templates/directives/loader-directive-template.html",'<div class="loader" data-ng-hide="activities.length === 0 && errors.length === 0"> <div class="loader__content"> <div class="venus container"> <figure class="loader__content__spinner" data-ng-show="activities.length !== 0 && errors.length === 0"> <img class="loader__content__spinner__image" data-ng-src="./assets/images/loader--spinner.gif" alt="Loading"> </figure> <div class="loader__content__message" data-ng-repeat="activity in activities"> <div data-ng-if="!activity.title && !activity.text" data-ng-bind-html="activity | unsafe"> </div> <div class="loader__content__message__title" data-ng-if="activity.title" data-ng-bind-html="activity.title | unsafe"> </div> <div class="loader__content__message__text" data-ng-if="activity.text" data-ng-bind-html="activity.text | unsafe"> </div> </div> <div class="loader__content__error" data-ng-repeat="error in errors"> <div data-ng-bind-html="error | unsafe"></div> <button class="loader__content__error__icon" data-ng-click="clearError(error)"> <i class="fa fa-times"></i> </button> </div> </div> </div> </div> '),t.put("app/templates/directives/navbar-directive-template.html",'<nav class="navbar navbar--fixed-top navbar--inverted"> <container> <div class="navbar-nav"> <button class="navbar-menu-toggle" data-ng-click="toggle()"> <i class="fa fa-fw fa-bars"></i> </button> <a class="navbar-brand" data-ng-click="goTo(\'/\')" title="Início"> <img class="navbar-brand-logo" width="32" height="32" data-ng-src="./assets/images/icons/icon-32x32.png" src="./assets/images/icons/icon-32x32.png"> Os Rastros </a> <ul class="navbar-menu list" data-ng-show="opened"> <!--\n\t\t\t\t<li class="list-item">\n\t\t\t\t\t<a class="list-item-link"\n\t\t\t\t\t   data-ng-click="goTo(\'/help\')">\n\t\t\t\t\t   <i class="fa fa-fw fa-question-circle-o"></i>\n\t\t\t\t\t\tAjuda\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t\t--> <li class="list-item" data-ng-show="user"> <a class="btn btn--black navbar-menu-user" title="Ver seu perfil" data-ng-click="goTo(\'/perfil\')"> {{ user.displayName || user.email }} <img class="navbar-menu-user-avatar" height="32" width="32" data-ng-src="{{ user.photoURL }}" data-ng-if="user.photoURL"> </a> </li> <li class="list-border"></li> <li class="list-item" data-ng-hide="user"> <a class="btn btn--black" data-ng-click="goTo(\'/login\')"> <i class="fa fa-fw fa-sign-in"></i> Entrar </a> </li> <li class="list-item" data-ng-show="user"> <a class="btn btn--light-black" data-ng-click="logout()" title="Sair"> <i class="fa fa-fw fa-power-off"></i> </a> </li> </ul> <!--\n\t\t\t<button class="navbar-menu-settings">\n\t\t\t\t<i class="fa fa-fw fa-ellipsis-v"></i>\n\t\t\t</button>\n\t\t\t--> </div> </container> </nav> ')}])}(),function(t,e){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?e(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],e):e(t.moment)}(this,function(t){var e=t.defineLocale("pt-br",{months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Dom_2ª_3ª_4ª_5ª_6ª_Sáb".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrás",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº"});return e}),angular.module("rastros").constant("urls",{CORS:"https://cors-anywhere.herokuapp.com/",FUTLIGA:{INDEX:"https://futliga.com.br/",NEXT_MATCHES:"futliga/associado/equipes/associado-equipes-obter-agenda.asp?codigo=8985"}}),angular.module("rastros").factory("routeChange",["$rootScope","$document","$timeout","$location","user","flow","scroll","loader",function(t,e,a,n,i,r,o,s){var l={},c="Carregando";return l.start=function(t,e){s.start(c)},l.success=function(){o.toTop(),a(function(){s.stop(c)},800)},l.error=function(t){s.stop(c),a(function(){s.error('<strong>VISH</strong>!<br />Isso aqui deu errado:<br />"'+t.name+'"')},1e3),r.goBack()},l}]),angular.module("rastros").factory("flow",["$filter","$location","$route",function(t,e,a){var n={lastPath:null};return n.goTo=function(t,a){var i=t||"/",r=["/404","/login","/register"];a=a?a:e.path(),r.indexOf(a)===-1&&(n.lastPath=a),e.path(i)},n.goBack=function(){var t=n.lastPath||"/";e.path(t)},n.reload=function(){a.reload()},n}]),angular.module("rastros").factory("loader",["$timeout",function(t){var e={activities:[],errors:[]};return e.start=function(t){if(e.activities.indexOf(t)===-1)return e.activities.push(t),!0},e.stop=function(a){t(function(){for(var t in e.activities)e.activities[t]===a&&e.activities.splice(t,1)},100)},e.error=function(t,a){e.errors.push(t),a&&console.error(a)},e.clearError=function(t){for(var a in e.errors)e.errors[a]===t&&e.errors.splice(a,1)},e}]),angular.module("rastros").factory("scroll",["$document",function(t){var e={};return e.toTop=function(e){var a=e||0,n=t.find("body");n.scrollTop(a,800)},e}]),angular.module("rastros").provider("moment",function(){var t;return{locale:function(e){t=e},$get:["$window",function(e){return e.moment.locale(t),e.moment}]}}),angular.module("rastros").service("futliga",["$http","$q","$filter","urls",function(t,e,a,n){var i=n.CORS+n.FUTLIGA.INDEX+n.FUTLIGA.NEXT_MATCHES,r={matches:[]};return r.get=function(){var a=e.defer(),n=i;return t.get(n).then(function(t){200===t.status&&a.resolve(t.data)}).catch(function(t){a.reject(t)}),a.promise},r.nextMatches=function(){var t=e.defer();return r.get().then(function(e){t.resolve(a("futligaMatches")(e))}).catch(function(e){t.reject(e)}),t.promise},r}]),angular.module("rastros").factory("fireb",["$q","loader",function(t,e){var a=firebase.database(),n={};return n.create=function(t){if(t){var n="Cadastrando";e.start(n);var i=a.ref().child("users").push().key;a.ref("users/"+i).set(t).then(function(){e.stop(n)}).catch(function(t){e.error(t)})}},n.getById=function(e){if(e){var n=t.defer();return a.ref("/users/"+e).once("value").then(function(t){n.resolve(t.val())}).catch(function(t){n.reject(t)}),n.promise}},n}]),angular.module("rastros").factory("user",["$rootScope","$timeout","loader","flow",function(t,e,a,n){var i=firebase.auth(),r={data:null,test:{}};return r.isLogged=function(){var e=r.data;return e?(t.$broadcast("user:logged",e),e):null},r.create=function(t,r){var o="Cadastrando";a.start(o),i.createUserWithEmailAndPassword(t,r).catch(function(t){a.error(t.message)}),e(function(){n.goBack(),a.stop(o)},1e3)},r}]),angular.module("rastros").factory("authentication",["$rootScope","$q","fireb","user","loader","flow",function(t,e,a,n,i,r){var o=firebase.auth(),s={};return s.login=function(t,e){var a="Autenticando";new firebase.auth.EmailAuthProvider.credential(t,e);i.start(a),o.signInWithEmailAndPassword(t,e).then(function(){r.goBack(),i.stop(a)}).catch(function(t){i.stop(a),i.error(t.message)})},s.logout=function(){var t="Saindo";i.start(t),o.signOut().then(function(){i.stop(t)},function(e){i.stop(t),i.error(e.message)})},s.facebook=function(){var t=new firebase.auth.FacebookAuthProvider;s.provider(t,"Facebook")},s.twitter=function(){var t=new firebase.auth.TwitterAuthProvider;s.provider(t,"Twitter")},s.provider=function(e,a){var r="Autenticando com "+a;e.addScope("email"),i.start(r),o.signInWithPopup(e).then(function(e){n.data=e.user,t.$broadcast("user:changed",n.data),i.stop(r)}).catch(function(e){var a=e.code,n=e.message,o=e.email;e.credential;t.$broadcast("user:changed",null),i.stop(r),i.error(""+a+": "+n+"<br />("+o+")")})},o.onAuthStateChanged(function(e){return e?(n.data=e,void t.$broadcast("user:changed",n.data)):(n.data=null,void t.$broadcast("user:changed",null))}),s}]),angular.module("rastros").controller("404Controller",["$scope","flow",function(t,e){t.goBack=function(){e.goBack()}}]),angular.module("rastros").controller("HomeController",["$scope","loader","flow","futliga",function(t,e,a,n){t.nextMatches=null,t.matches=function(){var a="Calendário da Futliga";e.start(a),n.nextMatches().then(function(e){t.nextMatches=e}).catch(function(t){e.error('Houve um problema com "'+a+'":<br />'+t.name)}).finally(function(){e.stop(a)})},t.otherPage=function(){a.goTo("/404")},t.$on("$viewContentLoaded",function(){t.matches()})}]),angular.module("rastros").controller("AuthController",["$scope","authentication","user","fireb","flow",function(t,e,a,n,i){t.form={},t.login=function(){var a=t.form;a.email&&a.password&&e.login(a.email,a.password)},t.facebook=function(){e.facebook()},t.$on("user:changed",function(e,a){t.user=a,t.user&&i.goBack()}),t.$on("$viewContentLoaded",function(){t.user=a.isLogged(),t.user&&i.goBack()})}]),angular.module("rastros").controller("ProfileController",["$scope","authentication","user","flow",function(t,e,a,n){t.facebookLink=function(){e.facebookLink()},t.resolveUser=function(e){return e?void(t.user=e):void n.goTo("/login")},t.$on("user:changed",function(e,a){t.resolveUser(a)}),t.$on("$viewContentLoaded",function(){t.resolveUser(a.isLogged())})}]),angular.module("rastros").directive("loader",["loader",function(t){return{restrict:"E",templateUrl:"app/templates/directives/loader-directive-template.html",scope:{},link:function(e){e.activities=t.activities,e.errors=t.errors,e.clearError=function(e){t.clearError(e)}}}}]),angular.module("rastros").directive("navbar",["$window","flow","user","authentication",function(t,e,a,n){return{restrict:"E",scope:!0,templateUrl:"app/templates/directives/navbar-directive-template.html",link:function(a){a.screen=t.innerWidth,a.opened=!0,a.logout=function(){n.logout()},a.goTo=function(t){var a=t||"/";e.goTo(a)},a.toggle=function(){a.opened=!a.opened},a.handle=function(){return a.screen<768?void(a.opened=!1):void(a.opened=!0)},a.resized=function(){a.screen!==t.innerWidth&&(a.screen=t.innerWidth,a.handle())},a.handle(),angular.element(t).bind("resize",a.resized)},controller:["$scope",function(t){t.user=a.data?a.data:a.isLogged(),t.$on("user:changed",function(e,a){t.user=a})}]}}]),angular.module("rastros").filter("unsafe",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}]),angular.module("rastros").filter("removeBreakLines",function(){return function(t){for(var e=t;e.match(/\r?\n|\r/);)e=e.replace(/\r?\n|\r/,"");return e}}),angular.module("rastros").filter("stringRemoveAfter",function(){return function(t,e){if(e)return e=t.indexOf(e),t.substring(0,e!==-1?e:t.length)}}),angular.module("rastros").filter("futligaMatches",["$filter","moment",function(t,e){return function(a){function n(t){if(t){var e=r.querySelectorAll("img"),a="https://futliga.com.br/imagens/distintivos/";for(var n in e){var i=e[n];if(i.src&&i.src.includes("/distintivos/"+t))return a+t+".gif"}return a+"0.jpg"}}function i(){var a=r.querySelectorAll('div[style="float: left; margin: 10px 5px 10px 5px; width: 540px;"]');for(var i in a){var l=a[i];if(l&&!angular.isFunction(l)&&!angular.isNumber(l)){var c=l.nextElementSibling;if(c.querySelector(".liga-link9")){var d,u,f,m,g,v,p,_,h,b={},w=angular.copy(s);m=c.querySelector('span[style="font-size: 30px;"]').innerText,l=l.querySelector('div[style="float: right; width: 50%; text-align: right;"]').innerText,l=l.replace("                            ",""),l=l.replace("                        ",""),l=t("removeBreakLines")(l),l=l.replace("Semana ",""),g=parseInt(l.slice(0,2)),p=parseInt(l.slice(3,7)),v=c.querySelector('span[style="color: #000000; font-size: 10px; text-transform: uppercase;"]').textContent,u=c.querySelectorAll('div[style="float: left; width: 300px; top: inherit; text-align: left;"]')[1],h=u.querySelector(".liga-link8").textContent,h=h.replace("                                                ",""),h=h.replace("                                            ",""),h=t("removeBreakLines")(h),u=u.innerHTML,u=t("stringRemoveAfter")(u,"&nbsp;-&nbsp;"),u=u.replace("                                            ",""),u=t("removeBreakLines")(u),f=u.slice(3,5),u=u.slice(0,2),d=e().year(p).week(g+2),d.day(t("weekDay")(v)),d.hour(u),d.minute(f),d.second(0),w.date.time=u+":"+f,w.date.day=m,w.date.weekDay=v,w.date.moment=d,w.date.formatted=d.format("dddd, DD [de] MMMM [de] YYYY"),w.location.stadium=h,_=c.querySelector(".liga-link9"),b.title=_.innerText,b.title=t("removeBreakLines")(b.title),b.title=b.title.replace("                                                ",""),b.title=b.title.replace("                                            ",""),b.id=_.attributes.href.textContent,b.id=b.id.replace(")",""),b.id=parseInt(b.id.replace("javascript:DetalharEquipe(","")),b.logo=n(b.id),w.opponent=b,o.push(w)}}}}var r=document.createElement("futliga"),o=[],s={opponent:null,date:{},location:{stadium:null,street:null,number:null,zone:null,city:"São Paulo",state:"SP"}};return r.innerHTML=a,i(r,o),o}}]),angular.module("rastros").filter("weekDay",function(){return function(t){var e;switch(t){case"Segunda":e="Monday";break;case"Terça":e="Tuesday";break;case"Quarta":e="Wednesday";break;case"Quinta":e="Thursday";break;case"Sexta":e="Friday";break;case"Sábado":e="Saturday";break;default:e="Monday"}return e}});